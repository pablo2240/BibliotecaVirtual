<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö Biblioteca Virtual</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="app.js" defer></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö Biblioteca Virtual</h1>
            <p class="subtitle">Sistema de Gesti√≥n de Libros y Pr√©stamos</p>
        </header>

        <!-- Navegaci√≥n -->
        <div class="nav-tabs">
            <button class="tab-btn active" onclick="showTab('login')">üîê Iniciar Sesi√≥n</button>
            <button class="tab-btn" onclick="showTab('registro')">üë§ Registro</button>
            <button class="tab-btn" onclick="showTab('catalogo')">üìñ Cat√°logo</button>
            <button class="tab-btn" onclick="showTab('prestamos')">üìã Pr√©stamos</button>
            <button class="tab-btn" onclick="showTab('reportes')">üìä Reportes</button>
        </div>

        <!-- Tab Login -->
        <div id="login" class="tab-content active">
            <h2>üîê Iniciar Sesi√≥n</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Correo Electr√≥nico:</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Contrase√±a:</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit">Iniciar Sesi√≥n</button>
            </form>
            <div id="loginMessage"></div>
        </div>

        <!-- Tab Registro -->
        <div id="registro" class="tab-content">
            <h2>üë§ Registro de Usuario</h2>
            <form id="registroForm">
                <div class="form-group">
                    <label for="registroNombre">Nombre Completo:</label>
                    <input type="text" id="registroNombre" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="registroEmail">Correo Electr√≥nico:</label>
                        <input type="email" id="registroEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="registroTipo">Tipo de Usuario:</label>
                        <select id="registroTipo" required>
                            <option value="">Seleccionar...</option>
                            <option value="1">Estudiante</option>
                            <option value="2">Docente</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="registroPassword">Contrase√±a:</label>
                    <input type="password" id="registroPassword" minlength="6" required>
                </div>
                <button type="submit">Registrarse</button>
            </form>
            <div id="registroMessage"></div>
        </div>

        <!-- Tab Cat√°logo -->
        <div id="catalogo" class="tab-content">
            <h2>üìñ Cat√°logo de Libros</h2>
            
            <!-- Filtros de b√∫squeda -->
            <form id="busquedaForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="buscarTitulo">Buscar por T√≠tulo:</label>
                        <input type="text" id="buscarTitulo" placeholder="Ingresa el t√≠tulo del libro...">
                    </div>
                    <div class="form-group">
                        <label for="buscarAutor">Buscar por Autor:</label>
                        <input type="text" id="buscarAutor" placeholder="Ingresa el nombre del autor...">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="buscarCategoria">Buscar por Categor√≠a:</label>
                        <input type="text" id="buscarCategoria" placeholder="Ingresa la categor√≠a...">
                    </div>
                    <div class="form-group">
                        <label>&nbsp;</label>
                        <button type="submit">üîç Buscar Libros</button>
                    </div>
                </div>
            </form>

            <div id="catalogoResults">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Cargando cat√°logo...</p>
                </div>
            </div>
        </div>

        <!-- Tab Pr√©stamos -->
        <div id="prestamos" class="tab-content">
            <div id="userSection" style="display: none;">
                <div class="user-info">
                    <h3>Usuario Logueado</h3>
                    <p id="currentUserInfo"></p>
                    <button class="btn-secondary" onclick="logout()">Cerrar Sesi√≥n</button>
                </div>

                <h2>üìã Gesti√≥n de Pr√©stamos</h2>
                
                <!-- Reservar Libro -->
                <h3>Reservar Libro</h3>
                <form id="reservaForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="libroIdReserva">ID del Libro:</label>
                            <input type="number" id="libroIdReserva" required>
                        </div>
                        <div class="form-group">
                            <label>&nbsp;</label>
                            <button type="submit">üìö Reservar Libro</button>
                        </div>
                    </div>
                </form>

                <!-- Devolver Libro -->
                <h3>Devolver Libro</h3>
                <form id="devolucionForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="prestamoIdDevolucion">ID del Pr√©stamo:</label>
                            <input type="number" id="prestamoIdDevolucion" required>
                        </div>
                        <div class="form-group">
                            <label>&nbsp;</label>
                            <button type="submit">‚Ü©Ô∏è Devolver Libro</button>
                        </div>
                    </div>
                </form>

                <!-- Prestar Libro (Solo para bibliotecarios) -->
                <h3>Prestar Libro</h3>
                <form id="prestamoForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="libroIdPrestamo">ID del Libro:</label>
                            <input type="number" id="libroIdPrestamo" required>
                        </div>
                        <div class="form-group">
                            <label>&nbsp;</label>
                            <button type="submit">‚úÖ Confirmar Pr√©stamo</button>
                        </div>
                    </div>
                </form>
            </div>

            <div id="loginPrompt">
                <div class="message">
                    <p>‚ö†Ô∏è Debes iniciar sesi√≥n para gestionar pr√©stamos.</p>
                    <button onclick="showTab('login')">Ir a Iniciar Sesi√≥n</button>
                </div>
            </div>

            <div id="prestamosMessage"></div>
        </div>

        <!-- Tab Reportes -->
        <div id="reportes" class="tab-content">
            <h2>üìä Reporte de Pr√©stamos Activos</h2>
            <button onclick="cargarReporte()">üîÑ Actualizar Reporte</button>
            
            <div id="reporteResults">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Cargando reporte...</p>
                </div>
            </div>
        </div>
    </div>

</body>
</html>